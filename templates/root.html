<!DOCTYPE html>
<html>
<head>
	<title>Nestanak-Info Service</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		html {
			background: #181d36;
		}
		body {
			font-family: 'SF Mono', Monaco, 'Courier New', monospace;
			background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
			background-attachment: fixed;
			margin: 0;
			padding: 0;
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.container {
			background: #2d2d2d;
			border-radius: 20px;
			box-shadow: 0 20px 60px rgba(0,0,0,0.5);
			padding: 60px 40px;
			text-align: center;
			max-width: 800px;
			margin: 20px;
		}
		h1 {
			color: #e0e0e0;
			font-size: 42px;
			margin: 0 0 10px 0;
			font-weight: 700;
		}
		.emoji {
			font-size: 64px;
			margin-bottom: 20px;
		}
		.subtitle {
			color: #b0b0b0;
			font-size: 18px;
			margin-bottom: 40px;
		}
		.stats {
			background: #1e1e1e;
			border-radius: 10px;
			padding: 20px;
			margin: 30px 0;
		}
		.stat-row {
			display: flex;
			justify-content: space-between;
			padding: 10px 0;
			border-bottom: 1px solid #404040;
		}
		.stat-row:last-child {
			border-bottom: none;
		}
		.stat-label {
			color: #b0b0b0;
			font-weight: 500;
		}
		.stat-value {
			color: #e0e0e0;
			font-weight: 600;
		}
		.status-badge {
			display: inline-block;
			padding: 8px 16px;
			border-radius: 20px;
			font-weight: 600;
			font-size: 14px;
			margin: 20px 0;
		}
		.status-online {
			background: #1e4620;
			color: #4CAF50;
		}
		.version {
			color: #999;
			font-size: 12px;
			margin-top: 30px;
		}
		.urls {
			margin: 30px 0;
		}
		.urls-list {
			background: #1e1e1e;
			border-radius: 10px;
			padding: 15px;
			max-height: 400px;
			overflow-y: auto;
		}
		.url-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 10px;
			border-bottom: 1px solid #404040;
		}
		.url-item:last-child {
			border-bottom: none;
		}
		.url-info {
			flex: 1;
			min-width: 0;
			overflow: hidden;
			text-align: left;
		}
		.url-info a {
			color: #569cd6;
			text-decoration: none;
			word-break: break-all;
		}
		.url-info a:hover {
			text-decoration: underline;
		}
		.url-status {
			display: flex;
			gap: 6px;
			flex-wrap: wrap;
			flex-shrink: 0;
			margin-left: 10px;
		}
		.badge {
			padding: 4px 10px;
			border-radius: 12px;
			font-size: 10px;
			font-weight: 600;
			white-space: nowrap;
		}
		.badge-ok {
			background: #1f5d2f;
			color: #4CAF50;
		}
		.badge-found {
			background: #5d1f1f;
			color: #f44336;
		}
		.badge-unreachable {
			background: #3d1f5d;
			color: #9c27b0;
		}
		.search-terms {
			margin: 20px 0;
			background: #1e1e1e;
			border-radius: 10px;
			padding: 15px;
		}
		.term-tag {
			display: inline-block;
			background: #404040;
			color: #e0e0e0;
			padding: 6px 12px;
			border-radius: 8px;
			margin: 4px;
			font-size: 12px;
		}

		/* Mobile Optimizations */
		@media (max-width: 768px) {
			body {
				padding: 10px;
			}
			.container {
				padding: 40px 25px;
				margin: 10px;
				border-radius: 15px;
			}
			.emoji {
				font-size: 48px;
				margin-bottom: 15px;
			}
			h1 {
				font-size: 32px;
				margin: 0 0 8px 0;
			}
			.subtitle {
				font-size: 15px;
				margin-bottom: 30px;
			}
			.status-badge {
				padding: 6px 14px;
				font-size: 13px;
				margin: 15px 0;
			}
			.stats {
				padding: 15px;
				margin: 20px 0;
			}
			.stat-row {
				padding: 8px 0;
				flex-direction: column;
				align-items: flex-start;
				gap: 4px;
			}
			.stat-label, .stat-value {
				font-size: 14px;
			}
			.version {
				font-size: 11px;
				margin-top: 25px;
			}
			.urls-list {
				padding: 10px;
				max-height: 300px;
			}
			.url-item {
				flex-direction: column;
				align-items: flex-start;
				padding: 8px;
			}
			.url-info {
				font-size: 12px;
			}
			.url-status {
				margin-left: 0;
				margin-top: 8px;
				gap: 4px;
			}
			.badge {
				font-size: 9px;
				padding: 3px 8px;
			}
			h2 {
				font-size: 16px !important;
			}
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="emoji">üîåüö∞</div>
		<h1>Nestanak-Info Service</h1>
		<p class="subtitle">Power & Water Outage Monitoring System</p>
		
		<div class="status-badge status-online">‚óè Service Online</div>
		
		<div class="stats">
			<div class="stat-row">
				<span class="stat-label">URLs Monitored</span>
				<span class="stat-value">{{.URLCount}}</span>
			</div>
			<div class="stat-row">
				<span class="stat-label">Service Uptime</span>
				<span class="stat-value">{{.Uptime}}</span>
			</div>
			<div class="stat-row">
				<span class="stat-label">Check Interval</span>
				<span class="stat-value">{{.Interval}} seconds</span>
			</div>
			<div class="stat-row">
				<span class="stat-label">Last Check</span>
				<span class="stat-value">{{.LastCheck}}</span>
			</div>
			<div class="stat-row">
				<span class="stat-label">Next Check</span>
				<span class="stat-value">{{.NextCheck}}</span>
			</div>
			<div class="stat-row">
				<span class="stat-label">Email Limit per URL</span>
				<span class="stat-value">{{.MaxEmailsPerDay}}/day</span>
			</div>
		</div>
		
		<div class="urls">
			<h2 style="color: #e0e0e0; font-size: 18px; margin: 30px 0 15px 0;">Monitored URLs</h2>
			<div class="urls-list">
				{{range .URLs}}
				<div class="url-item">
					<div class="url-info">
						<strong style="display: block; color: #e0e0e0;">{{.Name}}</strong>
						<a href="{{.URL}}" target="_blank" style="font-size: 11px; color: #888;">{{.ShortURL}}</a>
						<div style="margin-top: 5px;">
							{{range .SearchTerms}}
							<span class="term-tag" style="display: inline-block; background: #404040; color: #b0b0b0; padding: 3px 8px; border-radius: 6px; margin: 2px; font-size: 10px;">{{.}}</span>
							{{end}}
						</div>
						<div style="margin-top: 6px; font-size: 10px; color: #666;">
							<div>üïê Last: {{.LastCheck}}</div>
							<div>‚è∞ Next: {{.NextCheck}}</div>
						</div>
					</div>
					<div class="url-status">
						{{if .IsUnreachable}}
						<span class="badge badge-unreachable">üî¥ UNREACHABLE</span>
						{{else if .IsFound}}
						<span class="badge badge-found">‚ö†Ô∏è FOUND</span>
						{{else}}
						<span class="badge badge-ok">‚úì OK</span>
						{{end}}
					</div>
				</div>
				{{end}}
			</div>
		</div>
		
		{{if .RecentMatches}}
		<div class="urls" style="margin-top: 30px;">
			<h2 style="color: #e0e0e0; font-size: 18px; margin: 30px 0 15px 0;">Recent Matches (Last {{.MatchesHours}} hours)</h2>
			<div class="urls-list" style="max-height: 250px;">
				{{range .RecentMatches}}
				<div class="url-item" style="background: {{if .IsResolved}}#1e3a1e{{else}}#2a1a1a{{end}}; border-left: 3px solid {{if .IsResolved}}#4CAF50{{else}}#f44336{{end}}; padding-left: 12px;">
					<div class="url-info" style="width: 100%;">
						<span style="color: #999; font-size: 11px; display: block; margin-bottom: 3px;">{{.Timestamp}}</span>
						<a href="{{.URL}}" target="_blank" style="color: {{if .IsResolved}}#81c784{{else}}#f48fb1{{end}}; display: block; margin-bottom: 4px;">{{.URL}}</a>
						<span style="color: {{if .IsResolved}}#81c784{{else}}#ff8a80{{end}}; font-size: 12px; display: block;">{{.Description}}</span>
						{{if .IsResolved}}
						<span style="color: #4CAF50; font-size: 11px; display: block; margin-top: 4px;">‚úì Resolved{{if .Duration}} ({{.Duration}}){{end}}</span>
						{{else}}
						<span style="color: #FF9800; font-size: 11px; display: block; margin-top: 4px;">‚ö† Ongoing</span>
						{{end}}
					</div>
				</div>
				{{end}}
			</div>
		</div>
		{{end}}
		
		{{if .EmailNotifications}}
		<div class="urls" style="margin-top: 30px;">
			<h2 style="color: #e0e0e0; font-size: 18px; margin: 30px 0 15px 0;">üìß Recent Email Notifications</h2>
			<div class="urls-list" style="max-height: 300px;">
				{{range .EmailNotifications}}
				<div class="url-item" style="background: {{if eq .Type "match"}}#1a2a3a{{else if eq .Type "error"}}#3a1a1a{{else}}#1a3a1a{{end}}; border-left: 3px solid {{if eq .Type "match"}}#2196F3{{else if eq .Type "error"}}#f44336{{else}}#4CAF50{{end}}; padding-left: 12px;">
					<div class="url-info" style="width: 100%;">
						<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
							<span style="color: #999; font-size: 11px;">{{.Timestamp.Format "2006-01-02 15:04:05"}}</span>
							<span class="badge" style="background: {{if eq .Type "match"}}#2196F3{{else if eq .Type "error"}}#f44336{{else}}#4CAF50{{end}};">
								{{if eq .Type "match"}}üîî Match{{else if eq .Type "error"}}‚ö†Ô∏è Error{{else}}‚úÖ Recovery{{end}}
							</span>
						</div>
						<div style="color: #e0e0e0; font-size: 13px; margin-bottom: 4px; font-weight: 500;">{{.Subject}}</div>
						{{if .URLName}}
						<div style="color: #999; font-size: 11px; margin-bottom: 4px;">üìç {{.URLName}}</div>
						{{end}}
						<div style="color: #81c784; font-size: 11px;">
							üìß Sent to: {{range $i, $r := .Recipients}}{{if $i}}, {{end}}{{$r}}{{end}}
						</div>
					</div>
				</div>
				{{end}}
			</div>
		</div>
		{{end}}
		
		<p class="version">Nestanak-Info v1.0 ‚Ä¢ Server time: {{.Timestamp}}</p>
	</div>
</body> 
</html>

